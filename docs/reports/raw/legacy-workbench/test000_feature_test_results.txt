CompilerTester Feature Test Results - test000
===============================================
Test Date: $(date)
Test File: ../../PA6/test000.txt

SUMMARY
-------
✅ 9 out of 10 features working correctly
❌ 1 feature has a bug (CFG file output)

DETAILED TEST RESULTS
---------------------

1. ✅ Basic Compilation (no optimizations)
   Command: -s ../../PA6/test000.txt -b -i ../../PA6/dummy.in
   Result: PASS
   - Assembly file generated: ../../PA6/test000_asm.txt ✓
   - Program executed successfully (output: 102) ✓
   - No record file created (correct behavior) ✓

2. ✅ Single Optimization (cp)
   Command: -s ../../PA6/test000.txt -b -i ../../PA6/dummy.in -o cp
   Result: PASS
   - Record file generated: record_test000_cp.txt ✓
   - Contains CP transformation logs ✓
   - Program executed successfully ✓

3. ✅ Multiple Optimizations (cp cf)
   Command: -s ../../PA6/test000.txt -b -i ../../PA6/dummy.in -o cp -o cf
   Result: PASS
   - Record file generated: record_test000_cp_cf.txt ✓
   - Contains both CP and CF transformation logs ✓
   - Both optimizations applied correctly ✓

4. ✅ Loop Mode
   Command: -s ../../PA6/test000.txt -b -i ../../PA6/dummy.in -o cp -o cf -loop
   Result: PASS
   - Record file generated: record_test000_cp_cf_loop.txt ✓
   - Contains iteration logs (Iteration #1, #2, etc.) ✓
   - Optimizations run until convergence ✓

5. ✅ Max Optimization Mode
   Command: -s ../../PA6/test000.txt -b -i ../../PA6/dummy.in -max
   Result: PASS
   - Record file generated: record_test000_max.txt ✓
   - Contains all optimizations: cf, cp, cpp, dce, cse ✓
   - Shows multiple iterations with all passes ✓

6. ✅ AST Output
   Command: -s ../../PA6/test000.txt -a
   Result: PASS
   - AST printed to stdout ✓
   - Contains Computation, DeclarationList, StatementSequence, etc. ✓

7. ✅ CFG Output to Screen
   Command: -s ../../PA6/test000.txt -cfg screen
   Result: PASS
   - CFG dot graph printed to stdout ✓
   - Contains digraph G with basic blocks ✓

8. ❌ CFG Output to File
   Command: -s ../../PA6/test000.txt -cfg file
   Result: FAIL - BUG FOUND
   - Error: "Error accessing the cfg file: graphs:../../PA6/test000_cfg.dot"
   - Issue: Uses File.pathSeparator (":") instead of File.separator ("/")
   - Location: CompilerTester.java line 127
   - Fix needed: Change File.pathSeparator to File.separator

9. ✅ Register Count Option
   Command: -s ../../PA6/test000.txt -b -nr 12 -i ../../PA6/dummy.in
   Result: PASS
   - Compiler accepts custom register count ✓
   - Assembly file generated successfully ✓
   - Program executed correctly ✓

10. ✅ Combined Options
    Command: -s ../../PA6/test000.txt -b -i ../../PA6/dummy.in -o cp -o cf -o dce -loop -cfg file
    Result: PARTIAL PASS
    - Record file generated: record_test000_cp_cf_dce_loop.txt ✓
    - Contains all three optimizations with loop iterations ✓
    - Assembly file generated ✓
    - CFG file generation failed (same bug as test #8) ✗

OPTIMIZATION VERIFICATION
-------------------------
All optimizations are properly applied:
- Constant Propagation (cp): ✓ Working
- Constant Folding (cf): ✓ Working
- Dead Code Elimination (dce): ✓ Working
- Copy Propagation (cpp): ✓ Working (tested in max mode)
- Common Subexpression Elimination (cse): ✓ Working (tested in max mode)

FILE GENERATION VERIFICATION
-----------------------------
- Record files: ✓ Correct naming pattern (record_{testname}_{opts}_{loop|max}.txt)
- Assembly files: ✓ Generated in source file directory
- CFG files: ✗ Bug prevents file creation (screen output works)

BUGS FOUND
----------
1. CFG File Output Bug (Critical)
   - File: src/mocha/CompilerTester.java
   - Line: 127, 131
   - Issue: Uses File.pathSeparator instead of File.separator
   - Impact: CFG files cannot be written to disk
   - Fix: Replace File.pathSeparator with File.separator

CONCLUSION
----------
The CompilerTester supports all major features correctly:
- All optimization passes work
- Record file generation works correctly
- Assembly file generation works
- AST and CFG screen output work
- Register count option works
- Loop and max modes work correctly

Only issue: CFG file output has a path separator bug that prevents file creation.

